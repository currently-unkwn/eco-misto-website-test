---
// Tools
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";

// Compositions
import Frame from "../compositions/Frame.astro";
import Stack from "../compositions/Stack.astro";
import Cluster from "../compositions/Cluster.astro";

// Components
import Link from "../ui/Link.astro";
import Heading from "../ui/Heading.astro";

type Props = {
  project: CollectionEntry<"projects">;
  class?: string;
};

const { project, class: classList } = Astro.props;
const { title, cover, isCollage } = project.data;
---

<article class:list={["project-navigation", classList]}>
  <Link
    href={`${Astro.url.origin}/projects/${project.slug}`}
    class="project-navigation-link"
  >
    <Stack space="space-6">
      <Frame ratio="3:2" class:list={["img-wrapper", { collage: isCollage }]}>
        <Image src={cover} alt="" />
      </Frame>
      <Cluster noWrap justify="between" alignItems="baseline" space="space-7">
        <Heading tagName="h4" size="h6">{title}</Heading>
        <Icon
          name="icon-arrow-right"
          aria-hidden="true"
          focusable="false"
          class="color-primary"
        />
      </Cluster>
    </Stack>
  </Link>
</article>

<style>
  .project-navigation {
    & svg {
      --_size: var(--space-6);

      inline-size: var(--_size);
      block-size: var(--_size);

      flex-shrink: 0;
      transform: translateY(7px) rotate(-45deg);

      transition: transform var(--transition-default);
    }
  }

  .project-navigation-link {
    inline-size: 100%;
    block-size: 100%;
  }

  .img-wrapper {
    background-color: var(--color-accent);
    border-radius: var(--rounded-2xl);

    & img {
      object-fit: cover;
      inline-size: 100%;
      block-size: 100%;
    }

    &.collage img {
      object-fit: contain;
    }
  }
</style>
