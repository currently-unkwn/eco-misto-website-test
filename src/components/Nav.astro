---
// Compositions
import Cluster from "./compositions/Cluster.astro";

// Components
import Link from "./ui/Link.astro";

// Data
import { navData } from "@/data/siteData";

type Props = {
  color?: "primary" | "secondary" | "accent";
};

const { color } = Astro.props;
---

<nav class:list={["nav", { ["color-" + color]: color }]}>
  <Cluster tagName="ul" role="list" space="space-6">
    {
      navData.map((navItem) => {
        return (
          <li>
            <Link href={navItem.href} isHovered class="nav-link">
              {navItem.title}
            </Link>
          </li>
        );
      })
    }
  </Cluster>
</nav>

<style>
  nav {
  }

  .nav-link {
    font-size: var(--text-minus-1);
    color: inherit;
  }
</style>

<script>
  const { pathname } = window.location;

  function getBasePath(path: string) {
    const parts = path.split("/");

    if (parts.length >= 2) {
      return `/${parts[1]}`;
    }

    return "";
  }

  // TODO: Adjust to select a mobile navigation
  const activeNavigationElement = document.querySelector(
    `header nav a[href="${getBasePath(pathname)}"]`
  );

  if (activeNavigationElement) {
    activeNavigationElement.classList.add("active");
  }
</script>
